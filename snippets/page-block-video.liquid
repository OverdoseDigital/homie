{% style %}
  #video-{{ block.id }} {
    background-color: {{ block.settings.bg_color }};
  }
{% endstyle %}

<div data-subsection data-section-id="{{ block.id }}" data-section-type="video-section" id="video-{{ block.id }}" class="video-block {% if block.settings.title != blank %} has-text{% endif %} {% if block.settings.wide_video %} wide-video{% endif %}">
  <div class="video-section">
    {% if block.settings.title != blank %}
      <p class="h2" style="color:{{ block.settings.text_color }};">{{ block.settings.title }}</p>
    {% endif %}

    {% if block.settings.video_url contains 'youtube.com/watch' %}
      {%- assign video_id = block.settings.video_url | split: 'v=' -%}
      {%- assign video_id = video_id[1] | split: '&' | first -%}
      <style>
        .embed-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; }
        .embed-container iframe, .embed-container object, .embed-container embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
      </style>
      <div class='embed-container'><iframe src='https://www.youtube.com/embed/{{ video_id }}' frameborder='0' allowfullscreen></iframe></div>
    {% endif %}

    {% if block.settings.video_url contains 'youtu.be/' %}
      {%- assign video_id = block.settings.video_url | split: '.be/' -%}
      {%- assign video_id = video_id[1] | split: '&' | first -%}
      <style>
        .embed-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; }
        .embed-container iframe, .embed-container object, .embed-container embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
      </style>
      <div class='embed-container'><iframe src='https://www.youtube.com/embed/{{ video_id }}' frameborder='0' allowfullscreen></iframe></div>
    {% endif %}

    {% if block.settings.video_url contains 'vimeo.com' %}
      {%- assign video_id = block.settings.video_url | split: '.com/' -%}
      {%- assign video_id = video_id[1] | split: '/' | first -%}
      <style>
        .embed-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; }
        .embed-container iframe, .embed-container object, .embed-container embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
      </style>
      <div class='embed-container'><iframe src='https://player.vimeo.com/video/{{ video_id }}' frameborder='0' webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe></div>
    {% endif %}

    {% if block.settings.video_url contains '.mp4' %}
      <video id="Mp4Video-{{ block.id }}" src="{{ block.settings.video_url }}" loop muted playsinline autoplay></video>
    {% endif %}
    
  </div>
</div>
